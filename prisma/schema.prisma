// 云端部署用：PostgreSQL 版本
// 部署前复制为 schema.prisma 并配置 DATABASE_URL

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Category {
  id        String   @id @default(cuid())
  name      String
  sortOrder Int      @default(0)
  /** Clerk 用户 ID，多用户数据隔离 */
  userId    String?
  createdAt DateTime @default(now())
  albums    AlbumCover[]
}

model AlbumCover {
  id         String    @id @default(cuid())
  imageUrl   String
  albumName  String
  artistName String?
  releaseYear String?
  genre      String?
  notes      String?
  songId     String?
  songName   String?
  lyrics     String?
  /** 网易云专辑 ID，用于「按专辑再拉一次」补歌词 */
  albumId    String?
  /** 是否在歌词墙展示，未勾选的不上墙 */
  showOnLyricsWall Boolean @default(true)
  /** Clerk 用户 ID，多用户数据隔离 */
  userId     String?
  categoryId String?
  category   Category? @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
}

model LyricsCard {
  id         String   @id @default(cuid())
  lyrics     String
  albumName  String
  artistName String?
  imageUrl   String
  songName   String?
  /** 是否在歌词墙展示，未勾选的不上墙 */
  showOnLyricsWall Boolean @default(true)
  /** Clerk 用户 ID，多用户数据隔离 */
  userId     String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
